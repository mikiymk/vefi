//! Zigã®ãƒªãƒ†ãƒ©ãƒ«ã®æ›¸ãæ–¹ã‚’ç¢ºèªã™ã‚‹ã€‚

const utils = @import("./utils.zig");
const assert = utils.assert;

test {
    _ = boolean;
    _ = integer;
    _ = float;
}

/// è«–ç†å€¤ãƒªãƒ†ãƒ©ãƒ«
///
/// - `true`ã¾ãŸã¯`false`ãŒã‚ã‚‹ã€‚
/// - è«–ç†å€¤ãƒªãƒ†ãƒ©ãƒ«ã®å‹ã¯`bool`ã€‚
pub const boolean = struct {
    const value_01 = true;
    const value_02 = false;

    test "è«–ç†å€¤ãƒªãƒ†ãƒ©ãƒ«ã®å‹" {
        try assert(@TypeOf(true) == bool);
    }
};

/// æ•´æ•°ãƒªãƒ†ãƒ©ãƒ«
///
/// - 10é€²æ•°ã€2é€²æ•°(0b)ã€8é€²æ•°(0o)ã€16é€²æ•°(0x)ã‚’ä½¿ç”¨ã§ãã‚‹ã€‚
/// - `_`(ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢)ã§åŒºåˆ‡ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
/// - æ•´æ•°ãƒªãƒ†ãƒ©ãƒ«ã®å‹ã¯`comptime_int`ã§ã€æ¡ã®ä¸Šé™ã¯ãªã„ã€‚
pub const integer = struct {
    pub const value_01 = 42;
    pub const value_02 = 1_000_999;
    pub const value_03 = 12345678_12345678_12345678_12345678_12345678_12345678_12345678_12345678;
    pub const value_04 = 0b0110;
    pub const value_05 = 0o704;
    pub const value_06 = 0x1f2e;
    pub const value_07 = 0x1F2e;

    test "æ•´æ•°ãƒªãƒ†ãƒ©ãƒ«ã®å‹" {
        try assert(@TypeOf(42) == comptime_int);
    }
};

/// æµ®å‹•å°æ•°ç‚¹æ•°ãƒªãƒ†ãƒ©ãƒ«
///
/// - 10é€²æ•°ã€16é€²æ•°(0x)ã‚’ä½¿ç”¨ã§ãã‚‹ã€‚
/// - å°æ•°ç‚¹ã€æŒ‡æ•°ãŒä½¿ãˆã€æŒ‡æ•°ã¯10é€²æ•°ã§ã¯`e`ã¨`E`ã€16é€²æ•°ã¯`p`ã¨`P`ã‚’ä½¿ã†ã€‚
/// - `_` ã§åŒºåˆ‡ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
/// - å°æ•°ãƒªãƒ†ãƒ©ãƒ«ã®å‹ã¯`comptime_float`ã§ã€æ¡ã®ä¸Šé™ã¯ãªã„ã€‚
pub const float = struct {
    const value_01 = 12.3;
    const value_02 = 12e4;
    const value_03 = 12E4;
    const value_04 = 12e-5;
    const value_05 = 12.3e4;
    const value_06 = 3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647;
    const value_07 = 3.1415_9265;
    const value_08 = 0x1f2e.3d4c;
    const value_09 = 0x123abcP10;

    test "å°æ•°ãƒªãƒ†ãƒ©ãƒ«ã®å‹" {
        try assert(@TypeOf(12.3e4) == comptime_float);
    }

    test "é•ã†è¡¨è¨˜ã®åŒã˜å°æ•°" {
        try assert(12.3e4 == 123000.0);
    }
};

/// Unicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒªãƒ†ãƒ©ãƒ«
///
/// - ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³(')ã§å›²ã‚ã‚ŒãŸæ–‡å­—ã‚’Unicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒªãƒ†ãƒ©ãƒ«ã¨ã„ã†ã€‚
/// - 1ã¤ã®Unicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¡¨ã™ã€‚
/// - Unicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒªãƒ†ãƒ©ãƒ«ã®å‹ã¯`comptime_int`ã€‚
/// - ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãŒä½¿ãˆã‚‹ã€‚
pub const unicode_code_point = struct {
    const value_01 = 'a';
    const value_02 = 'ğŸ˜ƒ'; // asciiå¤–ã®æ–‡å­—

    // ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹
    const escape_sequence_01 = '\n'; // æ”¹è¡Œ
    const escape_sequence_02 = '\r'; // ã‚­ãƒ£ãƒªãƒƒã‚¸ãƒªã‚¿ãƒ¼ãƒ³
    const escape_sequence_03 = '\t'; // ã‚¿ãƒ–
    const escape_sequence_04 = '\\'; // ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥
    const escape_sequence_05 = '\''; // å˜å¼•ç”¨ç¬¦
    const escape_sequence_06 = '\"'; // äºŒé‡å¼•ç”¨ç¬¦
    const escape_sequence_07 = '\x64'; // 16é€²æ•°1ãƒã‚¤ãƒˆæ–‡å­—
    const escape_sequence_08 = '\u{1F604}'; // 16é€²æ•°Unicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

    test "Unicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒªãƒ†ãƒ©ãƒ«ã®å‹" {
        try assert(@TypeOf('a') == comptime_int);
    }
};

/// æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«
///
/// - ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³(")ã§å›²ã‚ã‚ŒãŸæ–‡å­—åˆ—ã‚’æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã¨ã„ã†ã€‚
/// - æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã§ã¯Unicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒªãƒ†ãƒ©ãƒ«ã¨åŒã˜ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ä½¿ãˆã‚‹ã€‚
/// - æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®å‹ã¯`*const [N:0]u8`ã§ã€Nã¯UTF-8ã§è¡¨ã‚ã—ãŸæ™‚ã®ãƒã‚¤ãƒˆæ•°ã€‚
/// - \\ã§å§‹ã¾ã‚‹è¡Œã¯è¤‡æ•°è¡Œæ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã«ãªã‚‹ã€‚
/// - è¤‡æ•°è¡Œæ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã§ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ä½¿ãˆãªã„ã€‚
/// - æ¬¡ã®è¡Œã‚‚\\ã§å§‹ã¾ã‚‹å ´åˆã€æ”¹è¡Œæ–‡å­—ã‚’åŠ ãˆã¦é€£ç¶šã—ãŸæ–‡å­—åˆ—ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ã€‚
pub const string = struct {
    const value_01 = "abc";
    const value_02 = "dog\tcat";
    const value_03 =
        \\abc
        \\def
        \\ghi
    ;

    test "æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã®å‹" {
        try assert(@TypeOf("abc") == *const [3:0]u8);
    }

    test "è¤‡æ•°è¡Œæ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«" {
        const string_1 = "abc\ndef\n\\t";
        const string_2 =
            \\abc
            \\def
            \\\t
        ;

        try assert(string_1.len == string_2.len);
        for (string_1, string_2) |s1, s2| {
            try assert(s1 == s2);
        }
    }
};

test "åˆ—æŒ™å‹ãƒªãƒ†ãƒ©ãƒ«" {
    // .(ãƒ‰ãƒƒãƒˆ)ã®å¾Œã«è­˜åˆ¥å­ãŒã‚ã‚‹ã¨åˆ—æŒ™å‹ãƒªãƒ†ãƒ©ãƒ«ã«ãªã‚‹ã€‚

    _ = .enum_literal;
}

test "æ§‹é€ ä½“å‹ãƒªãƒ†ãƒ©ãƒ«" {
    // .ã®å¾Œã«{}(æ³¢ã‹ã£ã“)ãŒã‚ã‚‹ã¨æ§‹é€ ä½“å‹ãƒªãƒ†ãƒ©ãƒ«ã«ãªã‚‹ã€‚
    // æ§‹é€ ä½“å‹ãƒªãƒ†ãƒ©ãƒ«ã®ä¸­ã§ã€,(ã‚«ãƒ³ãƒ)åŒºåˆ‡ã‚Šã§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å®šç¾©ã§ãã‚‹ã€‚
    // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯`.<ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å> = <å€¤>`ã®ã‚ˆã†ã«æ›¸ãã€‚

    _ = .{
        .foo = 1,
    };
}
